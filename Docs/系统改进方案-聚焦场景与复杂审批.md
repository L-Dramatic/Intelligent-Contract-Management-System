# 系统改进方案：聚焦场景与复杂审批流程

> **针对老师反馈的改进方案**  
> **日期**: 2025年11月

---

## 一、问题分析

### 1.1 问题1：范围太广，缺乏针对性

**老师反馈**：
> "比如我们同济大学的系统，他和其他某公司的系统肯定不一样啊"  
> "不要泛泛而谈，而是选取合适的角度深挖"

**当前问题**：
- 系统设计覆盖"电信领域"所有公司（运营商、普通公司、个人业主）
- 需求分析过于宽泛，缺乏深度
- 无法充分体现特定场景的实际复杂性

**改进方向**：
- ✅ **聚焦到单一特定场景**：选择一个具体、可深挖的场景
- ✅ **充分调研实际需求**：针对该场景进行深度需求挖掘
- ✅ **体现真实业务复杂性**：在有限范围内充分展现实际复杂度

---

### 1.2 问题2：审批逻辑过于简单，不符合实际

**老师反馈**：
> "正常情况下一份合同并不是严格按照组织树往上走的，组织树和审批结构并不是一样的！"  
> "比如一份合同可能在不同的阶段去找法务或者财务批准，有的阶段又不需要。"  
> "需不需要法务财务等也要根据实际情况，等等还有很多，甚至有很多特殊情况等等。"

**当前问题**：
- ❌ 简单沿组织树向上审批（项目经理→科长→处长）
- ❌ 忽略了跨部门审批（法务、财务）
- ❌ 没有考虑不同阶段的不同审批需求
- ❌ 没有条件判断机制（何时需要法务/财务）
- ❌ 没有处理特殊情况

**实际情况**：
```
真实审批流程示例（基站租赁合同）：
1. 业务部门审批（项目经理→科长→处长）✅ 沿组织树
2. 法务审批（如果合同金额>50万 OR 涉及特殊条款）⚠️ 跨部门
3. 财务审批（如果涉及付款方式变更 OR 金额>100万）⚠️ 跨部门
4. 总经理终审（如果金额>200万）✅ 沿组织树
```

**改进方向**：
- ✅ **审批阶段化**：区分业务审批、法务审批、财务审批等不同阶段
- ✅ **条件判断机制**：根据合同属性（金额、类型、条款）动态决定审批路径
- ✅ **跨部门审批**：支持从组织树跳转到其他部门（法务部、财务部）
- ✅ **并行/串行审批**：某些阶段可并行，某些必须串行
- ✅ **特殊情况处理**：紧急合同、特殊项目等例外流程

---

## 二、改进方案

### 2.1 场景聚焦方案

#### 方案A：大型电信运营商的基站租赁合同管理（推荐）⭐⭐⭐

**聚焦范围**：
- **组织类型**：仅限大型电信运营商（如中国移动、中国电信、中国联通）
- **合同类型**：仅限基站租赁合同（占运营商合同总量的60%）
- **业务场景**：运营商作为甲方，向业主（个人/公司）租赁站址

**为什么选择这个场景**：
1. ✅ **业务量大**：运营商每年签订数千份基站租赁合同
2. ✅ **标准化程度高**：合同模板相对固定，便于AI生成
3. ✅ **审批流程复杂**：涉及业务、法务、财务、合规等多个部门
4. ✅ **有深度可挖**：
   - 站址评估（位置、覆盖、租金）
   - 合规审查（城市规划、环保、消防）
   - 付款管理（年付/季付，履约保证金）
   - 续租管理（到期前3个月提醒）
5. ✅ **符合课程要求**：复杂度适中，既有挑战性又可实现

**需求深挖方向**：
- 站址信息管理（GPS坐标、楼层、面积、承重）
- 租金计算逻辑（按面积/按覆盖范围/按市场价）
- 合规检查清单（城市规划许可、环保评估、消防验收）
- 付款计划（首付、年付、续租押金）
- 合同变更场景（租金调整、租期延长、站址迁移）

---

#### 方案B：电信运营商的网络建设合同管理

**聚焦范围**：
- **组织类型**：仅限大型电信运营商
- **合同类型**：仅限网络建设合同（5G基站建设、光缆铺设等）
- **业务场景**：运营商作为甲方，与施工方签订建设合同

**为什么选择这个场景**：
1. ✅ **工程管理复杂**：涉及进度款、验收、质保
2. ✅ **审批流程复杂**：需要技术部门、财务部门、法务部门联合审批
3. ✅ **有深度可挖**：
   - 工程进度管理（里程碑、验收节点）
   - 进度款支付（与工程进度联动）
   - 技术规范审查（5G标准、施工规范）
   - 质保期管理

**缺点**：
- ⚠️ 工程进度款监控较复杂（之前已简化）
- ⚠️ 可能超出课程难度范围

---

#### 方案C：电信运营商的设备采购合同管理

**聚焦范围**：
- **组织类型**：仅限大型电信运营商
- **合同类型**：仅限设备采购合同（基站设备、传输设备等）
- **业务场景**：运营商作为甲方，向设备供应商采购

**为什么选择这个场景**：
1. ✅ **标准化程度高**：设备采购合同模板固定
2. ✅ **审批流程清晰**：采购部门→财务部门→法务部门
3. ✅ **有深度可挖**：
   - 设备规格管理（型号、参数、兼容性）
   - 价格谈判（批量采购折扣）
   - 质保期管理（设备质保、维修服务）
   - 到货验收流程

**缺点**：
- ⚠️ 业务复杂度相对较低
- ⚠️ 可能无法充分体现"深挖"要求

---

### 2.2 推荐方案：方案A（基站租赁合同管理）

**最终选择**：**大型电信运营商的基站租赁合同管理系统**

**理由**：
1. ✅ 业务量大，有实际价值
2. ✅ 复杂度适中，既有挑战又可实现
3. ✅ 审批流程复杂，可充分体现"深挖"
4. ✅ 符合课程要求，不会过于简单也不会过于复杂

---

### 2.3 复杂审批流程设计方案

#### 2.3.1 设计理念：审批阶段化 + 条件路由

**核心思想**：
- 审批不是简单的"沿组织树向上"
- 而是分为多个**审批阶段**，每个阶段有不同的审批逻辑
- 根据合同属性（金额、类型、条款）**动态决定**需要哪些阶段

---

#### 2.3.2 审批阶段定义

**阶段1：业务部门审批**（沿组织树）
- **路径**：起草人 → 直接上级 → ... → 部门负责人
- **判断条件**：所有合同都需要
- **审批内容**：业务合理性、站址选择、租金合理性

**阶段2：法务部门审批**（跨部门）
- **路径**：法务部 → 法务负责人
- **判断条件**：
  - 合同金额 > 50万元 **OR**
  - 涉及特殊条款（如：提前解约、违约金） **OR**
  - 对方为首次合作 **OR**
  - 起草人标记"需要法务审查"
- **审批内容**：法律风险、条款合规性、违约责任

**阶段3：财务部门审批**（跨部门）
- **路径**：财务部 → 财务负责人
- **判断条件**：
  - 合同金额 > 100万元 **OR**
  - 付款方式非常规（如：一次性付款） **OR**
  - 涉及履约保证金变更 **OR**
  - 起草人标记"需要财务审查"
- **审批内容**：资金预算、付款计划、财务风险

**阶段4：合规部门审批**（跨部门，基站租赁特有）
- **路径**：合规部 → 合规负责人
- **判断条件**：
  - 站址位于特殊区域（如：学校、医院附近） **OR**
  - 涉及城市规划变更 **OR**
  - 涉及环保评估
- **审批内容**：城市规划合规、环保合规、消防合规

**阶段5：总经理终审**（沿组织树）
- **路径**：总经理
- **判断条件**：
  - 合同金额 > 200万元 **OR**
  - 前序阶段有审批人标记"需总经理审批"
- **审批内容**：整体决策

---

#### 2.3.3 审批流程引擎设计

**流程配置表**（示例）：
```
审批阶段配置 (ApprovalStageConfig)
├─ 阶段ID
├─ 阶段名称（业务审批/法务审批/财务审批/合规审批/总经理审批）
├─ 触发条件（金额阈值/合同属性/特殊标记）
├─ 审批路径类型（组织树/跨部门/固定人员）
├─ 审批路径配置（职位节点列表 OR 部门ID OR 固定人员ID）
├─ 是否必须（是/否，如果"否"，审批人可跳过）
├─ 并行/串行（串行：必须等前序完成；并行：可与前序同时进行）
└─ 超时时间（小时）
```

**审批流程实例**（示例）：
```
合同：基站租赁，金额80万，站址在学校附近

阶段1：业务审批（必须，串行）
  → 项目经理（起草人）→ 科长 → 处长（终审）

阶段2：法务审批（触发：金额80万>50万，必须，串行）
  → 法务专员 → 法务经理（终审）

阶段3：财务审批（触发：金额80万<100万，但起草人标记"需要财务"，必须，串行）
  → 财务专员 → 财务经理（终审）

阶段4：合规审批（触发：站址在学校附近，必须，串行）
  → 合规专员 → 合规经理（终审）

阶段5：总经理审批（触发：金额80万<200万，但法务经理标记"需总经理审批"，必须，串行）
  → 总经理（终审）

最终流程：[业务审批] → [法务审批] → [财务审批] → [合规审批] → [总经理审批]
```

---

#### 2.3.4 特殊情况处理

**情况1：紧急合同（加急流程）**
- **触发条件**：起草人标记"紧急"
- **处理方式**：
  - 缩短超时时间（24小时 → 4小时）
  - 允许某些阶段并行审批
  - 自动提醒审批人

**情况2：小额合同（简化流程）**
- **触发条件**：金额 < 10万元
- **处理方式**：
  - 跳过法务审批（除非特殊标记）
  - 跳过财务审批（除非特殊标记）
  - 仅需业务审批 → 直接进入协商

**情况3：续租合同（简化流程）**
- **触发条件**：合同类型 = "续租"
- **处理方式**：
  - 跳过合规审批（站址已合规）
  - 简化法务审批（仅审查租金变更）
  - 简化财务审批（仅审查预算）

**情况4：特殊项目（额外审批）**
- **触发条件**：起草人标记"特殊项目"
- **处理方式**：
  - 强制所有阶段审批（即使不满足条件）
  - 增加"技术部门审批"阶段
  - 增加"安全部门审批"阶段

---

#### 2.3.5 审批路径计算算法

**伪代码**：
```
function calculateApprovalPath(contract):
    stages = []
    
    // 阶段1：业务审批（必须）
    businessStage = {
        type: "组织树审批",
        path: calculateTreePath(contract.drafter.position, contract.amount)
    }
    stages.append(businessStage)
    
    // 阶段2：法务审批（条件判断）
    if contract.amount > 500000 OR 
       contract.hasSpecialClause OR 
       contract.counterparty.isFirstTime OR
       contract.needLegalReview:
        legalStage = {
            type: "跨部门审批",
            department: "法务部",
            path: ["法务专员", "法务经理"]
        }
        stages.append(legalStage)
    
    // 阶段3：财务审批（条件判断）
    if contract.amount > 1000000 OR
       contract.paymentMethod.isUnusual OR
       contract.needFinanceReview:
        financeStage = {
            type: "跨部门审批",
            department: "财务部",
            path: ["财务专员", "财务经理"]
        }
        stages.append(financeStage)
    
    // 阶段4：合规审批（条件判断，基站租赁特有）
    if contract.siteLocation.isSpecialArea OR
       contract.involvesUrbanPlanning:
        complianceStage = {
            type: "跨部门审批",
            department: "合规部",
            path: ["合规专员", "合规经理"]
        }
        stages.append(complianceStage)
    
    // 阶段5：总经理审批（条件判断）
    if contract.amount > 2000000 OR
       anyPreviousStage.markedNeedGM:
        gmStage = {
            type: "固定人员审批",
            approver: "总经理"
        }
        stages.append(gmStage)
    
    return stages
```

---

### 2.4 数据模型调整

#### 2.4.1 新增实体

```
审批阶段配置 (ApprovalStageConfig) ⭐ 新增
├─ 阶段ID
├─ 阶段名称
├─ 触发条件（JSON格式，支持复杂条件）
├─ 审批路径类型（组织树/跨部门/固定人员）
├─ 审批路径配置
├─ 是否必须
├─ 并行/串行
└─ 超时时间

审批阶段实例 (ApprovalStageInstance) ⭐ 新增
├─ 合同ID
├─ 阶段配置ID
├─ 审批路径（实际计算的路径）
├─ 当前审批节点
├─ 审批状态（待审批/审批中/已通过/已驳回/已跳过）
├─ 开始时间
└─ 完成时间

审批流程 (ApprovalFlow) ⭐ 重构
├─ 合同ID
├─ 审批阶段列表（按顺序）
├─ 当前阶段
├─ 流程状态
└─ 是否紧急
```

---

### 2.5 系统功能调整

#### 2.5.1 新增功能

**UC-12: 配置审批阶段规则** ⭐⭐⭐
- **参与者**：系统管理员
- **功能**：配置不同合同类型、不同金额范围的审批阶段规则
- **示例**：
  - 基站租赁合同，金额>50万 → 需要法务审批
  - 基站租赁合同，金额>100万 → 需要财务审批
  - 基站租赁合同，站址在学校附近 → 需要合规审批

**UC-13: 动态计算审批路径** ⭐⭐⭐
- **触发时机**：合同提交审批时
- **功能**：根据合同属性和配置规则，动态计算需要哪些审批阶段
- **输出**：审批阶段列表（按顺序）

**UC-14: 跨部门审批** ⭐⭐
- **功能**：支持从组织树跳转到其他部门（法务部、财务部、合规部）
- **实现**：部门负责人作为审批入口，内部可再走组织树

**UC-15: 审批阶段跳过** ⭐
- **功能**：如果某阶段标记为"非必须"，审批人可跳过
- **场景**：小额合同，法务审批标记为"非必须"，法务专员可跳过

---

## 三、实施建议

### 3.1 需求调研

**针对"大型电信运营商的基站租赁合同管理"场景，需要深度调研**：

1. **实际审批流程调研**：
   - 访谈运营商合同管理人员
   - 了解真实审批流程（哪些阶段、哪些条件、哪些特殊情况）
   - 收集实际审批案例

2. **业务规则梳理**：
   - 法务审批的触发条件（金额阈值、特殊条款）
   - 财务审批的触发条件（金额阈值、付款方式）
   - 合规审批的触发条件（站址位置、城市规划）
   - 特殊情况处理（紧急合同、续租合同）

3. **数据模型设计**：
   - 站址信息模型（GPS、楼层、面积、承重）
   - 租金计算模型（按面积/按覆盖/按市场价）
   - 合规检查清单模型

---

### 3.2 开发优先级

**P0（必须实现）**：
1. 审批阶段配置功能
2. 动态审批路径计算
3. 组织树审批（业务审批阶段）
4. 跨部门审批（法务、财务、合规）

**P1（强烈推荐）**：
1. 条件判断机制（金额阈值、合同属性）
2. 特殊情况处理（紧急合同、续租合同）
3. 审批阶段跳过功能

**P2（可选）**：
1. 并行审批支持
2. 审批超时自动提醒
3. 审批统计分析

---

### 3.3 文档调整

**SRS文档需要调整的部分**：

1. **项目背景**：
   - 聚焦到"大型电信运营商的基站租赁合同管理"
   - 删除"普通公司"和"个人业主"相关内容
   - 强调基站租赁合同的业务特点和审批复杂性

2. **核心业务流程**：
   - 重新设计审批流程，体现多阶段、条件判断
   - 增加法务、财务、合规审批阶段
   - 增加特殊情况处理

3. **功能需求**：
   - 新增UC-12、UC-13、UC-14、UC-15
   - 修改UC-05（提交审批），改为"提交多阶段审批"
   - 详细描述审批阶段配置和动态路径计算

4. **数据模型**：
   - 新增审批阶段配置表
   - 新增审批阶段实例表
   - 重构审批流程表

---

## 四、总结

### 4.1 改进要点

1. ✅ **场景聚焦**：从"电信领域"聚焦到"大型电信运营商的基站租赁合同管理"
2. ✅ **需求深挖**：在有限范围内充分挖掘实际业务需求
3. ✅ **审批复杂化**：从简单"沿组织树向上"改为"多阶段+条件路由"
4. ✅ **跨部门支持**：支持法务、财务、合规等跨部门审批
5. ✅ **特殊情况处理**：紧急合同、续租合同、特殊项目等

### 4.2 预期效果

- ✅ **符合老师要求**：聚焦特定场景，充分深挖
- ✅ **体现真实复杂度**：审批流程符合实际，不再简单化
- ✅ **保持可实现性**：复杂度适中，不会超出课程范围
- ✅ **突出创新点**：动态审批路径计算、条件路由等

---

## 五、下一步行动

1. **确认场景选择**：与小组讨论，确认选择"基站租赁合同管理"
2. **需求调研**：收集运营商实际审批流程案例
3. **SRS修改**：按照本方案修改SRS文档
4. **PPT更新**：更新中期汇报PPT，体现聚焦和深挖


