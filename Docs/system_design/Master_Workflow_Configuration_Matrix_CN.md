# 主流程配置矩阵

> **文档用途**：工作流引擎数据库种子数据  
> **版本**：1.0  
> **最后更新**：2025-12-22  
> **作者**：BPM 高级分析师

---

## 1. 概述

本文档定义了智能合同管理系统中所有合同审批工作流的**确定性路由规则**。它作为工作流引擎数据库初始化的权威数据源。

### 1.1 治理原则

| 原则 | 说明 |
|-----------|-------------|
| **单一法人实体规则** | 县级分公司**无签约权限**。所有审批必须升级到市级角色。 |
| **Z岗级权限** | 财务阈值决定所需最高审批人。 |
| **强制检查点** | 某些合同类型需要不可跳过的验证节点。 |
| **三重一大会议** | 对于金额 > 50万元人民币，在总经理审批前必须进行集体决策。 |

---

## 2. 维度定义

### 2.1 合同子类型

| 类型代码 | 类别 | 子类型名称 |
|-----------|----------|---------------|
| A1 | 工程施工 | 土建工程 |
| A2 | 工程施工 | 装修工程 |
| A3 | 工程施工 | 零星维修 |
| B1 | 代维服务 | 光缆代维 |
| B2 | 代维服务 | 基站代维 |
| B3 | 代维服务 | 家宽代维 |
| B4 | 代维服务 | 应急保障 ⚡ |
| C1 | IT/DICT | 定制开发 |
| C2 | IT/DICT | 商用软件采购 |
| C3 | IT/DICT | DICT集成（背靠背） |

### 2.2 金额阶梯（Z岗级权限）

| 阶梯 | 金额范围（人民币） | 最终审批人 | 特殊条件 |
|------|-------------------|----------------|-------------------|
| 阶梯1 | < 1万元 | 部门经理（市级） | 标准路径 |
| 阶梯2 | 1万元 - 5万元 | 副总经理（市级） | 需要升级 |
| 阶梯3 | 5万元 - 50万元 | 总经理（市级） | 高级审查 |
| 阶梯4 | > 50万元 | 三重一大会议 + 总经理（市级） | 集体决策 |

---

## 3. 特殊路由规则

> [!IMPORTANT]
> 这些规则是**强制性的**，会覆盖标准路由逻辑。

| 规则ID | 条件 | 强制节点 | 理由 |
|---------|-----------|----------------|-----------|
| RULE-001 | 子类型 = C3（DICT集成） | 财务（应收检查）（市级） | 背靠背付款风险缓解 |
| RULE-002 | 子类型 = A1（土建工程） AND 金额 > 1万 | 成本审计（市级） | 工程成本合规性 |
| RULE-003 | 子类型 = B4（应急保障） | **快速通道** - 跳过部门经理 | 应急响应优先级 |
| RULE-004 | 金额 > 50万 | 三重一大会议（市级） | 集体决策要求 |

---

## 4. 主路由配置表

### 4.1 类型A - 工程施工合同

| 场景_ID | 子类型 | 金额范围 | 特定把关人 | 完整审批路径 |
|-------------|----------|--------------|---------------------|-------------------|
| A1-Tier1 | 土建工程 | < 1万元 | 项目经理（市级） | 县级发起人 → 项目经理（市级） → 部门经理（市级） ✓ |
| A1-Tier2 | 土建工程 | 1万 - 5万元 | 项目经理（市级），**成本审计（市级）** | 县级发起人 → 项目经理（市级） → 成本审计（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| A1-Tier3 | 土建工程 | 5万 - 50万元 | 项目经理（市级），**成本审计（市级）**，法务审查（市级） | 县级发起人 → 项目经理（市级） → 成本审计（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| A1-Tier4 | 土建工程 | > 50万元 | 项目经理（市级），**成本审计（市级）**，法务审查（市级），**三重一大会议（市级）** | 县级发起人 → 项目经理（市级） → 成本审计（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 三重一大会议（市级） → 总经理（市级） ✓ |
| A2-Tier1 | 装修工程 | < 1万元 | 项目经理（市级） | 县级发起人 → 项目经理（市级） → 部门经理（市级） ✓ |
| A2-Tier2 | 装修工程 | 1万 - 5万元 | 项目经理（市级），设计审查（市级） | 县级发起人 → 项目经理（市级） → 设计审查（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| A2-Tier3 | 装修工程 | 5万 - 50万元 | 项目经理（市级），设计审查（市级），法务审查（市级） | 县级发起人 → 项目经理（市级） → 设计审查（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| A2-Tier4 | 装修工程 | > 50万元 | 项目经理（市级），设计审查（市级），法务审查（市级），**三重一大会议（市级）** | 县级发起人 → 项目经理（市级） → 设计审查（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 三重一大会议（市级） → 总经理（市级） ✓ |
| A3-Tier1 | 零星维修 | < 1万元 | 设施协调员（市级） | 县级发起人 → 设施协调员（市级） → 部门经理（市级） ✓ |
| A3-Tier2 | 零星维修 | 1万 - 5万元 | 设施协调员（市级） | 县级发起人 → 设施协调员（市级） → 部门经理（市级） → 副总经理（市级） ✓ |

---

### 4.2 类型B - 代维服务合同

| 场景_ID | 子类型 | 金额范围 | 特定把关人 | 完整审批路径 |
|-------------|----------|--------------|---------------------|-------------------|
| B1-Tier1 | 光缆代维 | < 1万元 | 网络工程师（市级） | 县级发起人 → 网络工程师（市级） → 部门经理（市级） ✓ |
| B1-Tier2 | 光缆代维 | 1万 - 5万元 | 网络工程师（市级），网络规划（市级） | 县级发起人 → 网络工程师（市级） → 网络规划（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| B1-Tier3 | 光缆代维 | 5万 - 50万元 | 网络工程师（市级），网络规划（市级），法务审查（市级） | 县级发起人 → 网络工程师（市级） → 网络规划（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| B2-Tier1 | 基站代维 | < 1万元 | 射频工程师（市级） | 县级发起人 → 射频工程师（市级） → 部门经理（市级） ✓ |
| B2-Tier2 | 基站代维 | 1万 - 5万元 | 射频工程师（市级），站点获取（市级） | 县级发起人 → 射频工程师（市级） → 站点获取（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| B2-Tier3 | 基站代维 | 5万 - 50万元 | 射频工程师（市级），站点获取（市级），法务审查（市级） | 县级发起人 → 射频工程师（市级） → 站点获取（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| B2-Tier4 | 基站代维 | > 50万元 | 射频工程师（市级），站点获取（市级），法务审查（市级），**三重一大会议（市级）** | 县级发起人 → 射频工程师（市级） → 站点获取（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 三重一大会议（市级） → 总经理（市级） ✓ |
| B3-Tier1 | 家宽代维 | < 1万元 | 家宽专家（市级） | 县级发起人 → 家宽专家（市级） → 部门经理（市级） ✓ |
| B3-Tier2 | 家宽代维 | 1万 - 5万元 | 家宽专家（市级），客服主管（市级） | 县级发起人 → 家宽专家（市级） → 客服主管（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| B4-Tier1 | 应急保障 ⚡ | < 1万元 | **快速通道** - 运营中心（市级） | 县级发起人 → 运营中心（市级） ✓ |
| B4-Tier2 | 应急保障 ⚡ | 1万 - 5万元 | **快速通道** - 运营中心（市级） | 县级发起人 → 运营中心（市级） → 副总经理（市级） ✓ |
| B4-Tier3 | 应急保障 ⚡ | 5万 - 50万元 | **快速通道** - 运营中心（市级），法务审查（市级） | 县级发起人 → 运营中心（市级） → 法务审查（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| B4-Tier4 | 应急保障 ⚡ | > 50万元 | **快速通道** - 运营中心（市级），法务审查（市级），**三重一大会议（市级）** | 县级发起人 → 运营中心（市级） → 法务审查（市级） → 副总经理（市级） → 三重一大会议（市级） → 总经理（市级） ✓ |

---

### 4.3 类型C - IT/DICT合同

| 场景_ID | 子类型 | 金额范围 | 特定把关人 | 完整审批路径 |
|-------------|----------|--------------|---------------------|-------------------|
| C1-Tier1 | 定制开发 | < 1万元 | 技术负责人（市级），安全审查（市级） | 县级发起人 → 技术负责人（市级） → 安全审查（市级） → 部门经理（市级） ✓ |
| C1-Tier2 | 定制开发 | 1万 - 5万元 | 技术负责人（市级），安全审查（市级），IT架构（市级） | 县级发起人 → 技术负责人（市级） → 安全审查（市级） → IT架构（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| C1-Tier3 | 定制开发 | 5万 - 50万元 | 技术负责人（市级），安全审查（市级），IT架构（市级），法务审查（市级） | 县级发起人 → 技术负责人（市级） → 安全审查（市级） → IT架构（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| C1-Tier4 | 定制开发 | > 50万元 | 技术负责人（市级），安全审查（市级），IT架构（市级），法务审查（市级），**三重一大会议（市级）** | 县级发起人 → 技术负责人（市级） → 安全审查（市级） → IT架构（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 三重一大会议（市级） → 总经理（市级） ✓ |
| C2-Tier1 | 商用软件采购 | < 1万元 | 采购专员（市级），供应商管理（市级） | 县级发起人 → 采购专员（市级） → 供应商管理（市级） → 部门经理（市级） ✓ |
| C2-Tier2 | 商用软件采购 | 1万 - 5万元 | 采购专员（市级），供应商管理（市级），IT安全（市级） | 县级发起人 → 采购专员（市级） → 供应商管理（市级） → IT安全（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| C2-Tier3 | 商用软件采购 | 5万 - 50万元 | 采购专员（市级），供应商管理（市级），IT安全（市级），法务审查（市级） | 县级发起人 → 采购专员（市级） → 供应商管理（市级） → IT安全（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| C3-Tier1 | DICT集成 | < 1万元 | 市级解决方案架构师（市级），**财务（应收检查）（市级）** | 县级发起人 → 市级解决方案架构师（市级） → 财务（应收检查）（市级） → 部门经理（市级） ✓ |
| C3-Tier2 | DICT集成 | 1万 - 5万元 | 市级解决方案架构师（市级），**财务（应收检查）（市级）**，DICT项目经理（市级） | 县级发起人 → 市级解决方案架构师（市级） → 财务（应收检查）（市级） → DICT项目经理（市级） → 部门经理（市级） → 副总经理（市级） ✓ |
| C3-Tier3 | DICT集成 | 5万 - 50万元 | 市级解决方案架构师（市级），**财务（应收检查）（市级）**，DICT项目经理（市级），法务审查（市级） | 县级发起人 → 市级解决方案架构师（市级） → 财务（应收检查）（市级） → DICT项目经理（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 总经理（市级） ✓ |
| C3-Tier4 | DICT集成 | > 50万元 | 市级解决方案架构师（市级），**财务（应收检查）（市级）**，DICT项目经理（市级），法务审查（市级），**三重一大会议（市级）** | 县级发起人 → 市级解决方案架构师（市级） → 财务（应收检查）（市级） → DICT项目经理（市级） → 法务审查（市级） → 部门经理（市级） → 副总经理（市级） → 三重一大会议（市级） → 总经理（市级） ✓ |

---

## 5. 角色注册表

> [!NOTE]
> 根据单一法人实体规则，以下所有角色均为具有签约权限的市级角色。

| 角色代码 | 角色名称 | 权限级别 | 所属部门 |
|-----------|-----------|-----------------|------------|
| INIT | 县级发起人 | 仅发起 | 县级分公司 |
| PM | 项目经理（市级） | 技术审查 | 工程部 |
| CA | 成本审计（市级） | 财务合规 | 财务部 |
| DR | 设计审查（市级） | 技术标准 | 工程部 |
| NE | 网络工程师（市级） | 技术审查 | 网络运营部 |
| NP | 网络规划（市级） | 战略对齐 | 规划部 |
| RF | 射频工程师（市级） | 技术审查 | 网络运营部 |
| SA | 站点获取（市级） | 物业/租赁审查 | 房地产部 |
| FC | 设施协调员（市级） | 设施管理 | 行政部 |
| BS | 家宽专家（市级） | 技术审查 | 网络运营部 |
| CSL | 客服主管（市级） | 服务影响审查 | 客户服务部 |
| OC | 运营中心（市级） | 应急调度 | 运营部 |
| TL | 技术负责人（市级） | 代码/架构审查 | IT部 |
| SR | 安全审查（市级） | 网络安全合规 | IT安全部 |
| IA | IT架构（市级） | 企业架构 | IT部 |
| PS | 采购专员（市级） | 采购审查 | 采购部 |
| VM | 供应商管理（市级） | 供应商资质 | 采购部 |
| CSA | 市级解决方案架构师（市级） | DICT技术审查 | DICT部 |
| FRC | 财务（应收检查）（市级） | 收入验证 | 财务部 |
| DPM | DICT项目经理（市级） | 项目治理 | DICT部 |
| LR | 法务审查（市级） | 合同合规 | 法务部 |
| DM | 部门经理（市级） | 部门审批 | 各部门 |
| VP | 副总经理（市级） | 执行审批 | 执行层 |
| T1M | 三重一大会议（市级） | 集体决策 | 执行委员会 |
| GM | 总经理（市级） | 最终权限 | 执行层 |

---

## 6. 工作流状态转换

```
┌──────────────┐
│   草稿       │
└──────┬───────┘
       │ 提交
       ▼
┌──────────────┐     驳回
│  待审批      │◄──────────────┐
│              │               │
└──────┬───────┘               │
       │                       │
       ▼                       │
┌──────────────┐               │
│  审批中      │───────────────┘
│  (按节点)    │
└──────┬───────┘
       │ 全部通过
       ▼
┌──────────────┐
│   已批准     │
└──────┬───────┘
       │ 执行
       ▼
┌──────────────┐
│   已执行     │
└──────────────┘
```

---

## 7. 数据库种子数据格式（JSON Schema）

```json
{
  "scenario_id": "C3-Tier3",
  "sub_type_code": "C3",
  "sub_type_name": "DICT集成",
  "amount_min": 50000,
  "amount_max": 500000,
  "is_fast_track": false,
  "mandatory_nodes": ["财务（应收检查）（市级）"],
  "approval_sequence": [
    {"order": 1, "role": "县级发起人", "level": "county", "action": "initiate"},
    {"order": 2, "role": "市级解决方案架构师", "level": "city", "action": "review"},
    {"order": 3, "role": "财务（应收检查）", "level": "city", "action": "verify"},
    {"order": 4, "role": "DICT项目经理", "level": "city", "action": "review"},
    {"order": 5, "role": "法务审查", "level": "city", "action": "review"},
    {"order": 6, "role": "部门经理", "level": "city", "action": "approve"},
    {"order": 7, "role": "副总经理", "level": "city", "action": "approve"},
    {"order": 8, "role": "总经理", "level": "city", "action": "final_approve"}
  ]
}
```

---

## 8. 验证清单

- [x] 所有30个场景覆盖了类型A、B、C的排列组合
- [x] DICT（C3）在所有阶梯中都包含财务（应收检查）
- [x] 工程施工（A1）在阶梯2、3、4（> 1万）中包含成本审计
- [x] 应急保障（B4）标记为快速通道（跳过部门经理）
- [x] 所有角色都标注（市级）以符合单一法人实体规则
- [x] 所有阶梯4场景都包含三重一大会议
- [x] 所有路径都从县级发起人开始

---

## 9. 变更日志

| 版本 | 日期 | 作者 | 说明 |
|---------|------|--------|-------------|
| 1.0 | 2025-12-22 | BPM分析师 | 初始创建，包含30个审批场景 |

---

> **文档结束**
