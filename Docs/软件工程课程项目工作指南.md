# 智慧合同管理系统 - 软件工程课程项目工作指南

> **文档版本**: v1.0  
> **创建日期**: 2024年11月13日  
> **适用对象**: 项目团队全体成员  
> **文档目的**: 指导团队完成高质量的SRS和SDS文档，并顺利通过答辩

---

## 📊 核心认知：评分结构分析

### 评分占比

```
总分：100分
├── SRS（需求规格说明书） ────── 30分 ⭐⭐⭐
├── SDS（设计规格说明书） ────── 30分 ⭐⭐⭐
├── 中期答辩（需求评审） ────── [包含在SRS] 
├── 最终答辩 ──────────────── 20分 ⭐
└── 代码实现 ──────────────── 20分 ⭐

关键结论：
✅ 文档质量决定60%的成绩
✅ 代码是为了验证文档的可行性（占比仅20%）
✅ 答辩是为了展示对文档的理解深度
```

### 战略调整

| 之前的误区 | 正确的策略 |
|-----------|-----------|
| ❌ 急于写代码，功能堆砌 | ✅ 精心撰写SRS/SDS，需求分析深入 |
| ❌ 技术选型为重点 | ✅ 需求建模、设计建模为重点 |
| ❌ 追求功能数量 | ✅ 追求需求分析的深度和合理性 |
| ❌ 关注代码量 | ✅ 关注文档与代码的一致性 |

---

## 🎯 当前阶段工作重点（中期答辩前）

### 时间规划建议

```
假设中期答辩在第6周：

Week 1-2: 需求调研与分析
├── 深入理解题目要求
├── 需求获取（用例分析、场景建模）
├── 需求分类（功能需求 vs 非功能需求）
└── 需求优先级划分

Week 3-4: SRS文档撰写
├── 按照国标GB/T 9385标准编写SRS
├── 用例图、活动图、状态图等UML建模
├── 需求追踪矩阵
└── 团队内部评审（至少2轮）

Week 5: 中期答辩准备
├── SRS文档定稿
├── 准备答辩PPT（重点讲需求分析方法）
├── 预演答辩（模拟老师提问）
└── 准备需求变更应对策略
```

### 核心产出物

**本阶段必须完成的3个交付物**：

1. **SRS文档** (Software Requirements Specification)
   - 页数：建议30-50页
   - 质量标准：完整、一致、可验证、可追踪

2. **答辩PPT**
   - 页数：建议20-30页
   - 重点：展示需求工程方法论的应用

3. **需求分析工作记录**
   - 会议记录、讨论文档、迭代过程
   - 体现团队协作和需求演化过程

---

## 📖 高质量SRS文档编写指南

### SRS文档结构（基于IEEE 830标准）

```
智慧合同管理系统 - 软件需求规格说明书 (SRS)
版本：v1.0

目录结构：

1. 引言 (Introduction) 
   1.1 编写目的
   1.2 项目背景
   1.3 术语定义和缩略语
   1.4 参考资料
   1.5 文档概述

2. 综合描述 (Overall Description)
   2.1 产品概述
   2.2 产品功能
   2.3 用户特征
   2.4 运行环境
   2.5 设计和实现上的约束
   2.6 假设和依赖

3. 需求获取与分析方法 ⭐⭐⭐
   3.1 需求获取方法
       3.1.1 文档分析法（分析题目文档）
       3.1.2 原型法
       3.1.3 用例驱动
   3.2 需求分析过程
       3.2.1 需求分类
       3.2.2 需求优先级划分（MoSCoW方法）
       3.2.3 需求依赖关系分析
   3.3 涉众分析 ⭐
       3.3.1 项目经办人员
       3.3.2 法务人员
       3.3.3 财务人员
       3.3.4 审批领导（科员/科长/处长/局长）
       3.3.5 系统管理员
       3.3.6 涉众利益分析

4. 功能需求 (Specific Requirements) ⭐⭐⭐⭐⭐
   4.1 核心业务场景一：合同内容规范生成
       4.1.1 合同智能起草
             4.1.1.1 用例描述
             4.1.1.2 前置条件
             4.1.1.3 基本流程
             4.1.1.4 扩展流程
             4.1.1.5 后置条件
             4.1.1.6 特殊需求
       4.1.2 动态审批流程
             [详细用例分析]
       4.1.3 AI风险审查
             [详细用例分析]
   
   4.2 核心业务场景二：工程进度款监控
       4.2.1 进度确认与付款申请
       4.2.2 超额预警机制
       4.2.3 自动化提醒
   
   4.3 支撑功能
       4.3.1 用户权限管理
       4.3.2 文件管理
       4.3.3 系统管理

5. 外部接口需求
   5.1 用户界面
   5.2 硬件接口
   5.3 软件接口（LLM API、对象存储）
   5.4 通信接口（HTTP/HTTPS）

6. 非功能需求 ⭐⭐⭐
   6.1 性能需求
   6.2 安全性需求
   6.3 可靠性需求
   6.4 可维护性需求
   6.5 可移植性需求
   6.6 可用性需求

7. 数据需求
   7.1 数据模型（ER图）⭐
   7.2 数据字典
   7.3 数据完整性约束

8. 质量属性
   8.1 可测试性
   8.2 可追踪性

9. 需求追踪矩阵 ⭐⭐⭐⭐
   9.1 需求与用例的追踪
   9.2 需求与设计的追踪
   9.3 需求与测试用例的追踪

10. 附录
    10.1 UML用例图
    10.2 活动图
    10.3 状态图
    10.4 时序图
```

### 重点章节详解

#### 🌟 3. 需求获取与分析方法（体现方法论）

这是**展示软件工程理论**的核心章节！

**3.1 需求获取方法**

```markdown
### 3.1 需求获取方法

本项目采用多种需求获取方法，确保需求的完整性和准确性。

#### 3.1.1 文档分析法

**方法描述**：
通过分析课程项目题目文档，提取核心业务需求和约束条件。

**应用过程**：
1. 精读题目，提取关键词：
   - 核心业务：合同规范生成、进度款监控
   - 业务规则：履约保证金10%、分级审批、超额预警
   - 技术要求：AI应用、自动化、数字化

2. 将题目要求转化为需求陈述：
   | 题目原文 | 需求ID | 需求陈述 |
   |---------|--------|---------|
   | "分级审批程序(假设分为科员、科长、处长和局长四个级别)" | FR-01 | 系统应支持四级审批流程 |
   | "按变更金额分为5万元以下、5万元至20万元..." | FR-02 | 系统应根据合同金额自动路由到相应审批路径 |
   | "支付进度款金额不得突破已完工部分对应的批复概算" | FR-03 | 系统应在付款申请时校验金额，超额则强制拦截 |

3. 识别隐含需求：
   - 题目未明确，但业务必需的需求
   - 例如：用户登录、权限管理、操作日志等

**获取到的需求数量**：
- 功能需求：35个
- 非功能需求：18个

#### 3.1.2 用例驱动法

**方法描述**：
通过识别系统的参与者（Actor）和用例（Use Case），建立系统的功能模型。

**应用过程**：
1. 识别参与者：
   - 主要参与者：项目经办、法务、财务、审批领导、系统管理员
   - 次要参与者：LLM API、文件存储服务

2. 识别用例（部分示例）：
   - UC-01: 创建合同
   - UC-02: 提交合同审批
   - UC-03: 审批合同
   - UC-04: AI生成合同草稿
   - UC-05: AI风险审查
   - UC-06: 申请进度款
   - UC-07: 超额预警

3. 绘制用例图（见附录A）

4. 编写用例规约（详见4.1节）

#### 3.1.3 场景分析法

**方法描述**：
通过构建典型业务场景，深入理解用户需求和业务流程。

**场景1：合同从创建到执行的完整流程**
```

**为什么这部分重要？**
- 展示你们**系统地应用了需求工程方法论**
- 不是拍脑袋想需求，而是有理有据
- 老师在中期答辩会重点考察这部分

---

#### 🌟 4. 功能需求（用例详细描述）

**4.1.2 用例：动态审批流程（示例）**

```markdown
### 4.1.2 用例：提交合同审批

#### 用例ID
UC-02

#### 用例名称
提交合同审批

#### 主要参与者
项目经办人员

#### 次要参与者
工作流引擎、审批人员、通知服务

#### 前置条件
- PRE-01: 用户已登录系统
- PRE-02: 用户具有"项目经办"角色权限
- PRE-03: 合同已创建并处于"草稿"状态
- PRE-04: 合同必填字段已完整填写

#### 触发条件
用户点击合同详情页的"提交审批"按钮

#### 基本流程

1. 系统检查合同完整性
   - 1.1 验证必填字段是否已填写（合同号、甲乙方、金额、日期）
   - 1.2 验证合同金额是否与中标价一致
   - 1.3 验证履约保证金是否为中标价的10%

2. 系统调用工作流引擎，根据合同金额匹配审批路径
   - 2.1 IF 金额 < 5万：科员 → 科长
   - 2.2 IF 5万 ≤ 金额 < 20万：科员 → 科长 → 处长
   - 2.3 IF 20万 ≤ 金额 < 50万：科员 → 科长 → 处长
   - 2.4 IF 金额 ≥ 50万：科员 → 科长 → 处长 → 局长

3. 系统创建工作流实例
   - 3.1 生成唯一的工作流实例ID
   - 3.2 记录开始时间
   - 3.3 设置当前节点为第一个审批节点

4. [可选] 系统触发AI风险审查
   - 4.1 调用LLM API进行合同风险分析
   - 4.2 生成风险审查报告
   - 4.3 将报告附加到审批流中

5. 系统创建第一个审批任务
   - 5.1 根据组织架构，查找当前用户的直属上级（科员级别审批人）
   - 5.2 创建审批任务记录
   - 5.3 设置任务状态为"待审批"

6. 系统发送通知
   - 6.1 发送站内消息给审批人
   - 6.2 发送邮件提醒
   - 6.3 在审批人的"待办事项"列表中显示该任务

7. 系统更新合同状态
   - 7.1 将合同状态从"草稿"更新为"审批中"
   - 7.2 记录提交时间和提交人

8. 系统显示成功提示
   - 8.1 提示"合同已成功提交审批"
   - 8.2 显示预计审批路径和当前审批人

9. 系统记录操作日志
   - 9.1 记录操作人、操作时间、操作类型、关联合同ID

#### 扩展流程

**E1: 合同信息不完整**
- 在步骤1，如果必填字段未填写
  - E1.1 系统显示错误提示，高亮未填写的字段
  - E1.2 阻止提交，返回合同编辑页面
  - E1.3 用例结束

**E2: 合同金额与中标价不一致**
- 在步骤1.2，如果合同金额 ≠ 中标价
  - E2.1 系统显示警告："合同金额必须与中标价一致"
  - E2.2 阻止提交
  - E2.3 用例结束

**E3: 履约保证金比例错误**
- 在步骤1.3，如果履约保证金 ≠ 中标价 × 10%
  - E3.1 系统显示警告："履约保证金必须为中标价的10%"
  - E3.2 提供"自动计算"按钮
  - E3.3 用例返回步骤1

**E4: 无法找到审批人**
- 在步骤5.1，如果系统无法找到对应级别的审批人
  - E4.1 系统显示错误："未配置审批人，请联系系统管理员"
  - E4.2 回滚工作流实例创建
  - E4.3 合同状态保持"草稿"
  - E4.4 发送告警给系统管理员
  - E4.5 用例结束

**E5: AI风险审查失败**
- 在步骤4，如果LLM API调用失败或超时
  - E5.1 系统记录失败日志
  - E5.2 生成默认风险报告："AI审查服务暂时不可用，建议人工仔细审查"
  - E5.3 继续执行步骤5（不阻断流程）

**E6: 通知发送失败**
- 在步骤6，如果邮件发送失败
  - E6.1 系统记录失败日志
  - E6.2 仅保留站内消息通知
  - E6.3 继续执行步骤7（不阻断流程）

#### 后置条件
- POST-01: 合同状态更新为"审批中"
- POST-02: 工作流实例已创建
- POST-03: 第一个审批任务已创建并分配
- POST-04: 审批人收到通知
- POST-05: 操作日志已记录

#### 特殊需求

**业务规则**：
- BR-01: 合同金额必须与中标价完全一致，误差为0
- BR-02: 履约保证金必须精确为中标价的10%
- BR-03: 审批路径一旦确定，中途不可更改（即使合同金额修改）
- BR-04: 工作日的9:00-18:00提交的审批，应在24小时内流转到下一节点

**性能需求**：
- NFR-01: 提交审批操作应在2秒内完成响应
- NFR-02: AI风险审查应在30秒内完成或超时降级

**安全需求**：
- NFR-03: 提交审批操作必须记录完整的操作日志（不可篡改）
- NFR-04: 工作流状态变更应使用数据库事务保证一致性

#### 用例优先级
🔴 高（P0）- 核心业务流程，必须实现

#### 补充说明

**与题目要求的对应关系**：
本用例实现了题目中的以下需求：
1. "工程变更需履行分级审批程序"
2. "按变更金额分为5万元以下、5万元至20万元..."
3. "合同内容需要明确写明...支付相应的工程进度款"

**风险与假设**：
- 假设组织架构中每个用户都已正确配置上级领导
- 假设LLM API有可能不可用，需要降级策略
- 风险：如果审批人长期不处理，可能导致流程卡住（需要催办机制）
```

**为什么这样写？**
- ✅ **完整性**：前置条件、基本流程、扩展流程、后置条件齐全
- ✅ **可验证性**：每个步骤清晰，可以写测试用例
- ✅ **可追踪性**：明确需求ID、优先级、与题目的对应关系
- ✅ **异常处理**：考虑了各种异常情况（E1-E6）
- ✅ **约束明确**：业务规则、性能、安全需求都有规定

---

#### 🌟 6. 非功能需求（不能忽视！）

很多团队只关注功能需求，忽视非功能需求。但**非功能需求同样重要**！

```markdown
### 6.1 性能需求

#### 6.1.1 响应时间

| 操作类型 | 响应时间要求 | 优先级 | 测试方法 |
|---------|-------------|-------|---------|
| 用户登录 | ≤ 1秒 | P0 | 使用JMeter进行压力测试 |
| 合同列表查询 | ≤ 2秒 | P0 | 分页查询100条记录 |
| 合同创建 | ≤ 2秒 | P0 | 不含文件上传 |
| 文件上传 | ≤ 5秒 | P1 | 10MB PDF文件 |
| AI合同生成 | ≤ 30秒 | P1 | 超时则降级处理 |
| AI风险审查 | ≤ 30秒 | P1 | 超时则降级处理 |
| Dashboard渲染 | ≤ 3秒 | P2 | 包含5个图表 |

**理由说明**：
- AI相关操作时间较长是因为依赖外部LLM API，30秒是业界合理范围
- 设置了超时降级机制，确保不阻断核心业务流程

#### 6.1.2 并发用户数

- **目标并发用户数**：100个并发用户
- **峰值并发**：200个并发用户（短时突发）
- **测试方法**：使用JMeter模拟100个用户同时登录并创建合同

**理由说明**：
基于典型工程管理部门的规模（50-100人），考虑1-2倍的并发余量。

#### 6.1.3 数据量

- **合同数据量**：支持10,000条合同记录
- **用户数据量**：支持1,000个用户
- **文件存储**：支持500GB文件存储
- **数据库大小**：预计50GB

### 6.2 安全性需求

#### 6.2.1 身份认证

- **REQ-SEC-01**：系统必须要求用户登录后才能访问业务功能
- **REQ-SEC-02**：密码必须使用BCrypt加密存储，不得明文存储
- **REQ-SEC-03**：登录失败5次后，账号锁定30分钟
- **REQ-SEC-04**：会话超时时间设置为2小时，超时后需重新登录

#### 6.2.2 权限控制

- **REQ-SEC-05**：系统必须实现基于角色的访问控制（RBAC）
- **REQ-SEC-06**：普通用户不得访问系统管理功能
- **REQ-SEC-07**：用户只能查看和编辑自己创建的草稿合同
- **REQ-SEC-08**：审批人只能审批分配给自己的任务

#### 6.2.3 数据安全

- **REQ-SEC-09**：所有HTTP通信必须使用HTTPS（TLS 1.2+）
- **REQ-SEC-10**：敏感字段（如合同金额）应在日志中脱敏显示
- **REQ-SEC-11**：操作日志必须记录完整的审计信息，且不可被篡改或删除
- **REQ-SEC-12**：文件下载链接应包含时效性Token，有效期1小时

### 6.3 可靠性需求

- **REQ-REL-01**：系统可用性应达到99%（允许每月停机7.2小时）
- **REQ-REL-02**：数据库应每日自动备份，保留最近30天的备份
- **REQ-REL-03**：关键业务操作应使用数据库事务保证数据一致性
- **REQ-REL-04**：外部API调用失败时，应有降级策略，不阻断核心流程

### 6.4 可维护性需求

- **REQ-MAI-01**：代码注释覆盖率应≥30%
- **REQ-MAI-02**：核心业务逻辑应有单元测试，覆盖率≥60%
- **REQ-MAI-03**：系统应提供完整的API文档（Swagger）
- **REQ-MAI-04**：系统配置应外部化（使用配置文件，而非硬编码）

### 6.5 可用性需求

- **REQ-USA-01**：系统界面应遵循Material Design或Ant Design规范
- **REQ-USA-02**：关键操作（如删除、驳回）应有二次确认
- **REQ-USA-03**：错误提示信息应清晰易懂，告诉用户如何解决问题
- **REQ-USA-04**：系统应支持主流浏览器（Chrome、Edge、Firefox）
```

---

#### 🌟 9. 需求追踪矩阵（可追踪性）

这是**体现软件工程规范**的重要工具！

```markdown
### 9.1 需求与用例的追踪

| 需求ID | 需求描述 | 用例ID | 用例名称 | 优先级 |
|--------|---------|--------|---------|-------|
| REQ-001 | 系统应支持合同的创建 | UC-01 | 创建合同 | P0 |
| REQ-002 | 系统应支持四级审批流程 | UC-02 | 提交合同审批 | P0 |
| REQ-002 | 系统应支持四级审批流程 | UC-03 | 审批合同 | P0 |
| REQ-003 | 系统应根据金额自动路由审批路径 | UC-02 | 提交合同审批 | P0 |
| REQ-004 | 系统应支持AI生成合同草稿 | UC-04 | AI生成合同 | P1 |
| REQ-005 | 系统应支持AI风险审查 | UC-05 | AI风险审查 | P1 |
| REQ-006 | 系统应支持进度款申请 | UC-06 | 申请进度款 | P0 |
| REQ-007 | 系统应在超额时强制拦截 | UC-07 | 超额预警 | P0 |

### 9.2 需求与设计的追踪

| 需求ID | 设计模块 | 设计类/接口 | 数据库表 |
|--------|---------|------------|---------|
| REQ-002 | 工作流引擎 | WorkflowEngine.java | wf_instance, wf_task |
| REQ-003 | 工作流引擎 | WorkflowRouter.java | wf_definition |
| REQ-004 | AI服务 | AIContractService.java | ai_generation_log |
| REQ-005 | AI服务 | AIRiskReviewService.java | ai_risk_report |
| REQ-007 | 付款管理 | PaymentApplicationService.java | biz_payment_plan |

### 9.3 需求与测试用例的追踪

| 需求ID | 测试用例ID | 测试类型 | 预期结果 |
|--------|-----------|---------|---------|
| REQ-003 | TC-001 | 功能测试 | 金额<5万，路由到2级审批 |
| REQ-003 | TC-002 | 功能测试 | 金额≥50万，路由到4级审批 |
| REQ-007 | TC-010 | 功能测试 | 申请金额超额，系统拦截并提示 |
| REQ-007 | TC-011 | 边界测试 | 申请金额等于剩余额度，允许通过 |
```

**为什么需要追踪矩阵？**
- ✅ 确保每个需求都被实现
- ✅ 确保每个设计都有需求支撑（不过度设计）
- ✅ 确保每个需求都被测试
- ✅ **老师会重点看这个，体现你们的工程规范性**

---

## 🎤 中期答辩准备指南

### 答辩形式预测

```
时间：约15-20分钟
├── 团队陈述：10分钟
└── 老师提问：5-10分钟
```

### 答辩PPT结构

```
智慧合同管理系统 - 中期答辩（需求评审）

第一部分：项目概述（2分钟，3-4页）
├── 1. 项目背景与目标
├── 2. 团队分工
└── 3. 当前进度

第二部分：需求分析方法（3分钟，5-6页）⭐⭐⭐
├── 4. 需求获取方法
│   ├── 文档分析法
│   ├── 用例驱动法
│   └── 场景分析法
├── 5. 涉众分析
│   ├── 涉众识别
│   ├── 涉众需求矩阵
│   └── 涉众利益冲突分析
└── 6. 需求分类与优先级
    ├── MoSCoW方法
    └── 需求依赖关系图

第三部分：核心功能需求（4分钟，8-10页）⭐⭐⭐⭐⭐
├── 7. 用例模型概览
│   └── 用例图（展示全部用例）
├── 8. 核心场景一：合同生命周期管理
│   ├── 动态审批流程（重点讲解）
│   ├── AI风险审查
│   └── 活动图/时序图
├── 9. 核心场景二：进度款监控
│   ├── 超额预警机制（重点讲解）
│   ├── 自动化提醒
│   └── 状态图
└── 10. 支撑功能
    └── 权限管理、文件管理

第四部分：非功能需求（1分钟，2-3页）
├── 11. 性能需求
├── 12. 安全性需求
└── 13. 可靠性需求

第五部分：需求验证（1分钟，2页）
├── 14. 需求追踪矩阵
└── 15. 需求评审检查表

第六部分：后续计划（1分钟，1页）
└── 16. SDS文档编写计划
```

### 老师可能提出的问题（模拟）

#### **类型1：需求合理性质疑**

**Q1**: "你们的系统要求合同金额必须与中标价完全一致，但实际工程中可能存在变更，这个需求是否过于严格？"

**参考回答思路**：
```
感谢老师的问题。我们在需求分析阶段确实考虑过这个问题。

1. 题目原文明确要求"合同价须与中标价一致"，这是我们设计的依据。

2. 但老师提到的工程变更确实是真实场景，我们在需求分析中已经考虑：
   - 初始签订合同时，必须与中标价一致（符合题目要求）
   - 后续如有工程变更，通过"合同变更管理"功能处理
   - 变更需要走分级审批流程（题目也要求了）
   - 变更后会生成新的合同版本

3. 在SRS文档的4.1.4节"合同变更管理"用例中，我们详细描述了这个流程。

4. 这体现了需求的演化性：初始需求→扩展需求→变更管理需求。
```

**Q2**: "AI生成合同的准确率如何保证？如果生成的合同有错误怎么办？"

**参考回答思路**：
```
这是一个很好的问题，涉及AI系统的可靠性。我们的设计考虑了这一点：

1. AI生成的合同是"草稿"，而非最终版本：
   - 生成后由用户进行审查和修改
   - 用户可以多次编辑，不直接采用AI结果

2. 多重检查机制：
   - 提交审批时，有人工法务审查环节
   - AI风险审查会二次检查合同内容
   - 审批流程中，每一级审批人都可以发现问题

3. 降级策略：
   - 如果AI服务不可用，用户可以手动填写表单
   - 系统提供合同模板，确保业务不中断

4. 这体现了"AI辅助决策"而非"AI替代人"的设计理念。
```

#### **类型2：需求工程方法论**

**Q3**: "你们如何识别和管理需求变更？"

**参考回答思路**：
```
我们建立了需求变更管理机制：

1. 需求基线：
   - SRS v1.0作为需求基线，经过评审后冻结
   - 所有变更都基于基线版本进行

2. 变更流程（参考SRS第X章）：
   - 提出变更请求（CCR - Change Request）
   - 影响分析（分析对设计、代码、测试的影响）
   - 变更评审（团队讨论是否接受）
   - 更新文档（更新SRS版本号，记录变更历史）

3. 变更追踪：
   - 维护需求变更日志
   - 每次变更都记录原因、影响范围、负责人

4. 工具支持：
   - 使用Git管理SRS文档版本
   - 使用Issue跟踪需求变更请求
```

**Q4**: "如何确保需求的完整性和一致性？"

**参考回答思路**：
```
我们采用了多种方法来保证需求质量：

1. 完整性检查：
   - 使用需求检查表（Checklist）
   - 确保每个用例都有前置条件、基本流程、扩展流程、后置条件
   - 使用需求追踪矩阵，确保题目要求的每一点都被覆盖

2. 一致性检查：
   - 术语表统一：所有文档使用统一的术语（如"合同"而非"契约"）
   - 需求ID统一编号：避免重复或遗漏
   - 交叉验证：用例图与用例规约保持一致
   - 数据一致性：ER图中的实体与数据字典一致

3. 评审机制：
   - 团队内部至少进行2轮评审
   - 每次评审形成评审记录
   - 发现的问题记录在缺陷跟踪表中

4. 可验证性：
   - 每个需求都是可测试的
   - 避免模糊词汇（如"系统应尽可能快"）
   - 使用量化指标（如"响应时间≤2秒"）
```

#### **类型3：涉众分析**

**Q5**: "不同涉众之间的利益冲突如何平衡？比如项目经办人希望快速审批，而法务人员希望仔细审查？"

**参考回答思路**：
```
这是一个典型的涉众利益冲突问题，我们在涉众分析中已经识别：

1. 冲突识别（SRS 3.3节）：
   - 项目经办：追求效率，希望审批流程简短
   - 法务人员：追求合规，希望有充分时间审查
   - 领导：追求风险控制，希望流程严格
   - 财务：追求资金安全，希望付款审慎

2. 平衡策略：
   - 审批时限机制：
     * 设置每个节点的最大停留时间（如48小时）
     * 超时自动催办，平衡效率与质量
   - 分级审批：
     * 小额合同（<5万）简化流程（2级审批）
     * 大额合同（≥50万）严格流程（4级审批）
     * 风险与效率的动态平衡
   - AI辅助：
     * AI风险审查帮助法务快速发现问题
     * 提升审查效率，不牺牲质量

3. 需求协商记录：
   - 在SRS附录中记录了涉众会议纪要
   - 说明为何采用当前设计

4. 可配置性：
   - 审批时限可由系统管理员配置
   - 不同类型合同可配置不同流程
   - 为未来调整留有余地
```

#### **类型4：技术可行性**

**Q6**: "动态工作流引擎的实现难度很大，你们有信心在有限时间内完成吗？"

**参考回答思路**：
```
感谢老师的关注。我们在需求分析阶段确实考虑了技术可行性：

1. 需求分级（MoSCoW方法）：
   - Must Have（P0）：静态审批流（固定4级）—— 必须实现
   - Should Have（P1）：动态审批路由（基于金额）—— 尽量实现
   - Could Have（P2）：可视化工作流设计器—— 时间允许再做

2. 技术方案分层：
   - 基础版（2周）：
     * 硬编码审批流程
     * 可以完成核心业务功能
   - 增强版（+1周）：
     * 使用配置文件驱动工作流
     * 根据金额自动路由
   - 高级版（+2周，可选）：
     * 集成开源工作流引擎（Activiti）
     * 或开发简单的规则引擎

3. 风险应对：
   - 如果时间不够，保证基础版完成即可
   - 在SRS中，动态工作流是P1需求，而非P0
   - 但在设计时（SDS），我们会做好架构抽象，预留扩展点

4. 答辩策略：
   - 即使没有完全实现动态工作流，只要文档详实，仍可得分
   - 评分60%看文档，代码占比只有20%
```

---

## 📋 SRS文档评审检查表

在提交SRS前，使用此检查表进行自查：

### 完整性检查

- [ ] 所有章节都已完成，无"TODO"或"待补充"
- [ ] 术语表已完整定义所有专业术语
- [ ] 每个功能需求都有对应的用例描述
- [ ] 所有用例都包含：前置条件、基本流程、扩展流程、后置条件
- [ ] 非功能需求覆盖：性能、安全、可靠性、可维护性、可用性
- [ ] UML图齐全：用例图、活动图、状态图、时序图（至少各1个）
- [ ] 数据模型完整：ER图、数据字典
- [ ] 需求追踪矩阵已建立

### 一致性检查

- [ ] 所有需求ID唯一且连续
- [ ] 术语使用统一（如"合同"不与"契约"混用）
- [ ] 用例图与用例规约一致
- [ ] ER图与数据字典一致
- [ ] 需求追踪矩阵中的需求ID与正文一致

### 可验证性检查

- [ ] 每个需求都是可测试的
- [ ] 避免使用模糊词汇（如"尽可能"、"大约"）
- [ ] 性能需求有明确的量化指标
- [ ] 每个用例都有明确的成功标准

### 可追踪性检查

- [ ] 每个需求都能追溯到题目要求
- [ ] 每个需求都有设计对应（与未来SDS联动）
- [ ] 每个需求都有测试用例对应

### 格式规范检查

- [ ] 页眉页脚、页码设置正确
- [ ] 图表编号连续，有标题
- [ ] 引用文献格式规范
- [ ] 版本号、修订历史清晰
- [ ] 无错别字、语法错误

### 软件工程理论体现检查 ⭐⭐⭐

- [ ] 明确展示了需求获取方法（文档分析、用例驱动、场景分析）
- [ ] 进行了涉众分析，识别了利益冲突
- [ ] 使用了需求优先级划分方法（MoSCoW）
- [ ] 建立了需求追踪矩阵
- [ ] 考虑了需求变更管理
- [ ] 使用了UML建模工具
- [ ] 体现了需求工程的迭代过程

---

## 📐 SDS文档准备（中期答辩后）

中期答辩通过后，立即开始SDS（软件设计说明书）的编写。

### SDS文档结构

```
智慧合同管理系统 - 软件设计说明书 (SDS)
版本：v1.0

目录结构：

1. 引言
   1.1 编写目的
   1.2 项目背景
   1.3 术语定义
   1.4 参考资料

2. 系统概述
   2.1 系统目标
   2.2 系统边界
   2.3 设计约束

3. 系统架构设计 ⭐⭐⭐⭐⭐
   3.1 架构风格
       3.1.1 前后端分离架构
       3.1.2 分层架构（表示层、业务层、数据层）
       3.1.3 架构决策理由
   3.2 系统总体架构图
   3.3 技术栈选型
       3.3.1 前端技术栈
       3.3.2 后端技术栈
       3.3.3 数据库选型
       3.3.4 第三方服务
   3.4 部署架构
       3.4.1 开发环境
       3.4.2 生产环境
       3.4.3 Docker容器化

4. 详细设计 ⭐⭐⭐⭐⭐
   4.1 子系统划分
       4.1.1 用户权限子系统
       4.1.2 合同管理子系统
       4.1.3 工作流引擎子系统 ⭐
       4.1.4 AI服务子系统 ⭐
       4.1.5 付款管理子系统
       4.1.6 通知服务子系统
   
   4.2 核心模块设计
       4.2.1 工作流引擎设计 ⭐⭐⭐
             4.2.1.1 类图
             4.2.1.2 时序图
             4.2.1.3 状态图
             4.2.1.4 核心算法（审批路由算法）
       4.2.2 AI服务设计
             4.2.2.1 类图
             4.2.2.2 接口设计
             4.2.2.3 降级策略设计
       4.2.3 超额预警设计
             4.2.3.1 检查算法
             4.2.3.2 拦截机制
   
   4.3 接口设计
       4.3.1 RESTful API设计
       4.3.2 API列表
       4.3.3 数据传输对象（DTO）
   
   4.4 数据库设计 ⭐⭐⭐⭐
       4.4.1 概念模型（ER图）
       4.4.2 逻辑模型（表结构）
       4.4.3 物理模型（索引、分区）
       4.4.4 数据字典
       4.4.5 数据完整性约束

5. 设计模式应用 ⭐⭐⭐
   5.1 策略模式（审批策略）
   5.2 责任链模式（审批链）
   5.3 状态模式（合同状态流转）
   5.4 工厂模式（工作流创建）
   5.5 单例模式（规则引擎）
   5.6 观察者模式（事件通知）

6. 安全设计
   6.1 认证设计（JWT）
   6.2 授权设计（RBAC）
   6.3 数据加密
   6.4 防SQL注入
   6.5 XSS防护

7. 性能设计
   7.1 缓存策略（Redis）
   7.2 数据库优化（索引、分页）
   7.3 异步处理（AI调用）
   7.4 文件存储优化

8. 异常处理设计
   8.1 异常分类
   8.2 异常处理策略
   8.3 日志记录

9. 设计追踪矩阵 ⭐⭐⭐
   9.1 需求到设计的追踪
   9.2 设计到代码的追踪

10. 附录
    10.1 类图（完整）
    10.2 时序图
    10.3 状态图
    10.4 数据库ER图
```

### SDS核心章节要点

#### **3. 系统架构设计**

一定要画清楚架构图，并**说明设计理由**：

```markdown
### 3.1.1 前后端分离架构

**设计决策**：
本系统采用前后端分离架构，前端使用Vue 3，后端使用Spring Boot。

**理由**：
1. 关注点分离：前端专注UI/UX，后端专注业务逻辑
2. 并行开发：前后端团队可以并行工作，提升效率
3. 可扩展性：未来可以开发移动端，复用后端API
4. 技术演进：前后端可以独立升级技术栈

**优势**：
- 开发效率高
- 代码维护性好
- 支持前后端分离部署

**劣势**：
- 需要定义清晰的接口契约
- 跨域问题需要处理

**权衡决策**：
优势远大于劣势，且劣势可以通过技术手段解决（CORS配置、API文档）。
```

**为什么要写这么详细？**
- ✅ 体现你们不是随便选技术，而是经过深思熟虑
- ✅ 展示架构设计的权衡思维（trade-off）
- ✅ 老师会看你们是否理解架构决策背后的原因

#### **4.2 核心模块设计 - 工作流引擎（示例）**

这是体现设计能力的核心部分！

```markdown
### 4.2.1 工作流引擎设计

#### 4.2.1.1 类图

[插入类图]

**核心类说明**：

1. **WorkflowDefinition（工作流定义）**
   - 职责：定义审批流程的模板
   - 属性：id, name, contractType, minAmount, maxAmount, nodes
   - 方法：validate(), getNodeCount()

2. **WorkflowInstance（工作流实例）**
   - 职责：表示一个正在运行的审批流程
   - 属性：id, definitionId, contractId, currentNode, status
   - 方法：start(), moveToNextNode(), complete()

3. **WorkflowEngine（工作流引擎）**
   - 职责：控制工作流的执行
   - 方法：
     * start(contractId): 启动工作流
     * approve(taskId, opinion): 处理审批通过
     * reject(taskId, opinion): 处理审批驳回
     * moveNext(instanceId): 流转到下一节点

4. **WorkflowRouter（工作流路由器）**
   - 职责：根据合同属性选择工作流定义
   - 方法：route(contract): WorkflowDefinition
   - 算法：根据金额区间匹配

5. **ApprovalTask（审批任务）**
   - 职责：表示一个待处理的审批任务
   - 属性：id, instanceId, nodeName, assigneeId, status, opinion
   - 方法：approve(), reject(), transfer()

#### 4.2.1.2 时序图：提交审批流程

[插入时序图]

**交互步骤说明**：
1. 用户调用ContractService.submitForApproval()
2. ContractService调用WorkflowRouter.route()选择工作流
3. WorkflowRouter返回WorkflowDefinition
4. ContractService调用WorkflowEngine.start()
5. WorkflowEngine创建WorkflowInstance
6. WorkflowEngine创建第一个ApprovalTask
7. WorkflowEngine调用NotificationService发送通知
8. 返回成功结果给用户

#### 4.2.1.3 状态图：工作流实例状态

[插入状态图]

**状态说明**：
- INITIAL（初始）
- RUNNING（运行中）
- APPROVED（已通过）
- REJECTED（已驳回）
- CANCELED（已取消）

**状态转换**：
- INITIAL → RUNNING：调用start()
- RUNNING → APPROVED：最后一个节点审批通过
- RUNNING → REJECTED：任意节点审批驳回
- RUNNING → CANCELED：用户主动撤销（仅在第一节点）

#### 4.2.1.4 核心算法：审批路由算法

**算法名称**：AmountBasedRoutingAlgorithm

**输入**：Contract对象（包含amount和contractType）

**输出**：WorkflowDefinition对象

**算法描述**：
```java
public WorkflowDefinition route(Contract contract) {
    BigDecimal amount = contract.getAmount();
    String type = contract.getType();
    
    // 步骤1：根据合同类型和金额区间查询工作流定义
    List<WorkflowDefinition> candidates = workflowDefinitionRepository
        .findByContractTypeAndAmountRange(type, amount);
    
    // 步骤2：如果找到多个，选择最精确匹配的
    if (candidates.size() > 1) {
        candidates.sort((a, b) -> {
            BigDecimal rangeA = a.getMaxAmount().subtract(a.getMinAmount());
            BigDecimal rangeB = b.getMaxAmount().subtract(b.getMinAmount());
            return rangeA.compareTo(rangeB); // 区间小的优先
        });
    }
    
    // 步骤3：返回最佳匹配
    if (!candidates.isEmpty()) {
        return candidates.get(0);
    }
    
    // 步骤4：如果没有匹配，返回默认工作流
    return workflowDefinitionRepository.findDefaultWorkflow();
}
```

**时间复杂度**：O(n log n)，其中n是候选工作流数量（通常<10）

**空间复杂度**：O(n)

**边界情况处理**：
- amount为null：抛出IllegalArgumentException
- 没有匹配的工作流：返回默认4级审批流
- 金额刚好在边界（如5.00万）：根据配置的区间定义处理

#### 4.2.1.5 设计模式应用

本模块应用了以下设计模式：

1. **责任链模式**：审批任务链式流转
2. **状态模式**：工作流实例状态管理
3. **策略模式**：不同审批策略（并签、或签、会签）
4. **工厂模式**：创建不同类型的工作流实例
```

**为什么要这么详细？**
- ✅ 类图展示结构设计
- ✅ 时序图展示动态交互
- ✅ 状态图展示状态管理
- ✅ 算法描述展示核心逻辑
- ✅ 设计模式应用展示理论联系实践

---

## 🎯 团队工作计划与分工

### Week 1-2: 需求调研与分析

| 任务 | 负责人 | 工作内容 | 产出物 |
|------|--------|---------|--------|
| 需求获取 | 全员 | 深入分析题目，识别所有需求点 | 需求列表（Excel） |
| 涉众分析 | 成员A | 识别涉众，分析利益关系 | 涉众分析报告 |
| 用例建模 | 成员B | 绘制用例图，编写用例规约 | 用例图 + 用例文档 |
| 数据建模 | 成员C | 设计ER图，编写数据字典 | ER图 + 数据字典 |
| 非功能需求 | 成员D | 整理性能、安全等需求 | 非功能需求文档 |

### Week 3-4: SRS文档撰写

| 任务 | 负责人 | 工作内容 | 产出物 |
|------|--------|---------|--------|
| SRS第1-3章 | 成员A | 引言、概述、方法论 | SRS前3章 |
| SRS第4章 | 成员B+C | 功能需求详细描述 | SRS第4章 |
| SRS第5-7章 | 成员D | 接口、非功能、数据需求 | SRS第5-7章 |
| SRS第8-10章 | 成员A | 质量属性、追踪矩阵、附录 | SRS第8-10章 |
| 文档整合 | 全员 | 统一格式、交叉检查 | SRS v0.9 |
| 内部评审 | 全员 | 团队内评审，修改完善 | 评审记录 + SRS v1.0 |

### Week 5: 中期答辩准备

| 任务 | 负责人 | 工作内容 | 产出物 |
|------|--------|---------|--------|
| PPT制作 | 成员A+B | 制作答辩PPT | 答辩PPT |
| 答辩演练 | 全员 | 模拟答辩，准备问答 | 答辩脚本 |
| SRS定稿 | 全员 | 根据评审意见最终修改 | SRS v1.0（定稿） |

### Week 6-8: SDS文档撰写

| 任务 | 负责人 | 工作内容 | 产出物 |
|------|--------|---------|--------|
| 架构设计 | 成员A | 系统架构、技术选型 | SDS第3章 |
| 核心模块设计 | 成员B | 工作流引擎、AI服务设计 | SDS第4.2章 |
| 接口设计 | 成员C | API设计、DTO定义 | SDS第4.3章 |
| 数据库设计 | 成员D | 详细表结构、索引设计 | SDS第4.4章 |
| 设计模式整理 | 成员A | 整理所有应用的设计模式 | SDS第5章 |
| 文档整合 | 全员 | 统一格式、交叉检查 | SDS v1.0 |

### Week 9-12: 代码实现（核心功能）

**原则**：只实现P0和部分P1功能，确保与文档一致

| 任务 | 负责人 | 工作内容 | 验收标准 |
|------|--------|---------|---------|
| 基础框架搭建 | 成员A | 前后端框架、数据库 | 能运行Hello World |
| 用户权限模块 | 成员B | 登录、RBAC | 能登录，能控制权限 |
| 合同CRUD | 成员C | 合同创建、查看、列表 | 能完成合同基本操作 |
| 审批流程 | 成员D | 静态审批流（P0） | 能走完审批流程 |
| AI集成（可选） | 成员A | LLM API调用 | 能生成合同草稿 |
| 付款管理 | 成员B | 付款申请、超额预警 | 超额能被拦截 |
| 自动化提醒 | 成员C | 定时任务、邮件通知 | 能发送提醒邮件 |
| 前端页面 | 成员D | 主要业务页面 | UI美观，可操作 |

### Week 13-14: 测试与答辩准备

| 任务 | 负责人 | 工作内容 | 产出物 |
|------|--------|---------|--------|
| 功能测试 | 全员 | 测试所有功能 | 测试报告 |
| Bug修复 | 全员 | 修复发现的问题 | 修复记录 |
| 文档完善 | 全员 | 补充用户手册、部署文档 | 完整文档包 |
| 最终答辩准备 | 全员 | 制作答辩PPT、演示视频 | 答辩材料 |

---

## 💡 关键成功因素

### 1. 文档质量是第一优先级

```
时间分配建议：
├── 文档撰写：50%（SRS + SDS）
├── 代码实现：30%
├── 测试与答辩准备：15%
└── 学习与调研：5%
```

### 2. 体现软件工程理论

**必须在文档中体现的理论**：

- ✅ **需求工程**：
  - 需求获取方法（文档分析、用例驱动、场景分析）
  - 需求分类（功能/非功能、优先级）
  - 需求追踪矩阵
  - 需求变更管理

- ✅ **UML建模**：
  - 用例图（展示系统功能）
  - 类图（展示结构设计）
  - 时序图（展示交互过程）
  - 状态图（展示状态转换）
  - 活动图（展示业务流程）

- ✅ **设计模式**：
  - 至少应用5种设计模式
  - 每种模式都要说明应用场景和理由

- ✅ **架构设计**：
  - 分层架构
  - 前后端分离
  - 架构决策与权衡

- ✅ **质量保证**：
  - 测试策略
  - 代码规范
  - 评审机制

### 3. 深度优于广度

**深度的体现**：

1. **用例规约的完整性**：
   - 不是简单列举功能
   - 而是详细描述前置条件、基本流程、扩展流程、后置条件
   - 考虑各种异常情况

2. **设计的细致程度**：
   - 不是只有架构图
   - 而是详细到类的方法、算法的复杂度、边界情况的处理

3. **需求分析的深入性**：
   - 不是照搬题目
   - 而是分析涉众利益、需求冲突、权衡决策

### 4. 文档与代码的一致性

**最终答辩时，老师会检查**：
- SRS中描述的用例，是否在代码中实现？
- SDS中设计的类，是否在代码中存在？
- 数据库表结构，是否与SDS一致？
- 需求追踪矩阵中的需求，是否都被验证？

**建议**：
- 在代码中使用注释，标明对应的需求ID和设计ID
- 保持文档与代码的双向追踪

---

## 🚨 常见误区与避坑指南

### 误区1：急于写代码，忽视文档

❌ **错误做法**：
"我们先把系统做出来，最后再补文档"

✅ **正确做法**：
"我们先把SRS和SDS写详细，然后按照文档实现代码"

**理由**：
- 文档占60分，代码只占20分
- 先写文档能发现设计问题，避免返工
- 文档是团队协作的基础

### 误区2：文档写得太简略

❌ **错误做法**：
"系统应支持合同审批。" （一句话结束）

✅ **正确做法**：
按照用例模板，详细描述前置条件、基本流程（10+步骤）、扩展流程（5+异常场景）、后置条件

### 误区3：只关注功能需求，忽视非功能需求

❌ **错误做法**：
只写了30个功能需求，非功能需求只有3个

✅ **正确做法**：
功能需求30个，非功能需求至少18个（性能、安全、可靠性、可维护性、可用性各3-5个）

### 误区4：UML图画得太简单

❌ **错误做法**：
- 用例图只有5个用例
- 类图只有3个类
- 没有时序图、状态图

✅ **正确做法**：
- 用例图：15-20个用例，体现系统完整性
- 类图：每个核心模块都有详细类图（10-15个类）
- 时序图：至少3个核心交互场景
- 状态图：至少2个状态机（合同状态、工作流状态）

### 误区5：没有体现需求工程方法论

❌ **错误做法**：
直接列需求清单，没说怎么来的

✅ **正确做法**：
专门写一章"需求获取与分析方法"，说明：
- 用了哪些方法获取需求
- 如何进行涉众分析
- 如何划分优先级
- 如何处理需求冲突

---

## 📚 参考资料与工具推荐

### 标准与规范

1. **GB/T 9385-2008**：《软件工程 软件生存周期过程》
2. **IEEE 830-1998**：《软件需求规格说明书推荐实践》
3. **ISO/IEC 25010**：《系统与软件质量模型》

### 书籍推荐

1. 《软件工程：实践者的研究方法》（Roger S. Pressman）
2. 《UML和模式应用》（Craig Larman）
3. 《需求工程：软件建模与分析》（骆斌）

### 工具推荐

| 用途 | 工具 | 说明 |
|------|------|------|
| UML建模 | Visual Paradigm / StarUML / Draw.io | 绘制用例图、类图、时序图等 |
| 文档编写 | Microsoft Word / Markdown + Typora | Word更正式，Markdown更高效 |
| 团队协作 | 飞书文档 / 语雀 / Notion | 多人协同编辑 |
| 版本控制 | Git + GitHub | 管理文档和代码版本 |
| 思维导图 | XMind / MindMaster | 整理需求结构 |
| 原型设计 | Figma / 墨刀 / Axure | 快速制作界面原型 |

---

## ✅ 行动清单（当前周立即执行）

### 本周必须完成的任务（按优先级）

#### 🔴 P0 - 必须完成

- [ ] **任务1**：团队会议，分配SRS章节负责人（DDL：本周内）
- [ ] **任务2**：深度研读题目，提取所有需求点（DDL：3天内）
- [ ] **任务3**：识别涉众，进行涉众分析（DDL：5天内）
- [ ] **任务4**：绘制用例图（初稿），识别15-20个用例（DDL：1周内）
- [ ] **任务5**：选择3个核心用例，编写详细用例规约（示例）（DDL：1周内）

#### 🟠 P1 - 尽快完成

- [ ] **任务6**：绘制ER图（初稿），设计核心表结构（DDL：1周内）
- [ ] **任务7**：整理非功能需求清单（至少15个）（DDL：10天内）
- [ ] **任务8**：搭建文档模板（Word或Markdown）（DDL：3天内）
- [ ] **任务9**：学习UML建模工具（Visual Paradigm）（DDL：3天内）

#### 🟡 P2 - 有时间再做

- [ ] **任务10**：绘制活动图、状态图（DDL：2周内）
- [ ] **任务11**：制作原型界面（Figma）（DDL：2周内）

---

## 🎓 最终寄语

亲爱的团队成员们：

软件工程课程的核心，**不是让你们成为编程高手，而是让你们理解如何系统地开发软件**。

✨ **记住**：
- 60%的分数在文档，不要本末倒置
- 代码可以简单，但文档必须详实
- 深度分析一个功能，胜过浅尝十个功能
- 体现方法论，比堆砌技术更重要

💪 **行动起来**：
- 今天就召开团队会议，分配任务
- 本周完成需求分析初稿
- 2周内完成SRS初稿
- 4周内准备好中期答辩

🎯 **目标**：
不仅要通过课程，更要掌握软件工程的精髓——**系统化思维、规范化流程、工程化实践**。

祝你们项目顺利！答辩成功！💯

---

**文档版本历史**

| 版本 | 日期 | 作者 | 变更说明 |
|------|------|------|---------|
| v1.0 | 2024-11-13 | AI助手 | 初始版本，完整工作指南 |

---

**文档结束**

